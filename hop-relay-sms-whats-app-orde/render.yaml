services:
  # Main Shopify App
  - type: web
    name: hoprelay-shopify-app
    runtime: docker
    plan: starter
    region: oregon
    branch: production-setup
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: SHOPIFY_API_KEY
        value: 2ba8e6117cba33bf73b057cb11b169db
      - key: SHOPIFY_API_SECRET
        sync: false  # Set manually in Render dashboard
      - key: SHOPIFY_APP_URL
        sync: false  # Will be auto-generated by Render
      - key: SCOPES
        value: read_orders,read_customers
      - key: HOPRELAY_ADMIN_BASE_URL
        value: https://hoprelay.com/admin
      - key: HOPRELAY_API_BASE_URL
        value: https://hoprelay.com/api
      - key: HOPRELAY_SYSTEM_TOKEN
        sync: false  # Set manually in Render dashboard
      - key: HOPRELAY_DEFAULT_COUNTRY
        value: US
      - key: HOPRELAY_DEFAULT_TIMEZONE
        value: America/New_York
      - key: HOPRELAY_DEFAULT_LANGUAGE_ID
        value: 1
      - key: HOPRELAY_DEFAULT_ROLE_ID
        value: 2
      - key: DATABASE_URL
        fromDatabase:
          name: hoprelay-db
          property: connectionString

databases:
  - name: hoprelay-db
    plan: starter
    databaseName: hoprelay
    user: hoprelay
